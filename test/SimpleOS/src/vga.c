#include "io.h"

unsigned cur_line = 0, cur_col = 0;

unsigned char logo[6][70] = {
        {32, 219, 219, 219, 219, 219, 219, 219, 187, 219, 219, 187, 219, 219, 219, 187, 32, 32, 32, 219, 219, 219, 187, 219, 219, 219, 219, 219, 219, 187, 32, 219, 219, 187, 32, 32, 32, 32, 32, 219, 219, 219, 219, 219, 219, 219, 187, 32, 32, 32, 32, 32, 219, 219, 219, 219, 219, 219, 187, 32, 219, 219, 219, 219, 219, 219, 219, 187, 32},
        {32, 219, 219, 201, 205, 205, 205, 205, 188, 219, 219, 186, 219, 219, 219, 219, 187, 32, 219, 219, 219, 219, 186, 219, 219, 201, 205, 205, 219, 219, 187, 219, 219, 186, 32, 32, 32, 32, 32, 219, 219, 201, 205, 205, 205, 205, 188, 32, 32, 32, 32, 219, 219, 201, 205, 205, 205, 219, 219, 187, 219, 219, 201, 205, 205, 205, 205, 188, 32},
        {32, 219, 219, 219, 219, 219, 219, 219, 187, 219, 219, 186, 219, 219, 201, 219, 219, 219, 219, 201, 219, 219, 186, 219, 219, 219, 219, 219, 219, 201, 188, 219, 219, 186, 32, 32, 32, 32, 32, 219, 219, 219, 219, 219, 187, 32, 32, 32, 32, 32, 32, 219, 219, 186, 32, 32, 32, 219, 219, 186, 219, 219, 219, 219, 219, 219, 219, 187, 32},
        {32, 200, 205, 205, 205, 205, 219, 219, 186, 219, 219, 186, 219, 219, 186, 200, 219, 219, 201, 188, 219, 219, 186, 219, 219, 201, 205, 205, 205, 188, 32, 219, 219, 186, 32, 32, 32, 32, 32, 219, 219, 201, 205, 205, 188, 32, 32, 32, 32, 32, 32, 219, 219, 186, 32, 32, 32, 219, 219, 186, 200, 205, 205, 205, 205, 219, 219, 186, 32},
        {32, 219, 219, 219, 219, 219, 219, 219, 186, 219, 219, 186, 219, 219, 186, 32, 200, 205, 188, 32, 219, 219, 186, 219, 219, 186, 32, 32, 32, 32, 32, 219, 219, 219, 219, 219, 219, 219, 187, 219, 219, 219, 219, 219, 219, 219, 187, 32, 32, 32, 32, 200, 219, 219, 219, 219, 219, 219, 201, 188, 219, 219, 219, 219, 219, 219, 219, 186, 32},
        {32, 200, 205, 205, 205, 205, 205, 205, 188, 200, 205, 188, 200, 205, 188, 32, 32, 32, 32, 32, 200, 205, 188, 200, 205, 188, 32, 32, 32, 32, 32, 200, 205, 205, 205, 205, 205, 205, 188, 200, 205, 205, 205, 205, 205, 205, 188, 32, 32, 32, 32, 32, 200, 205, 205, 205, 205, 205, 188, 32, 200, 205, 205, 205, 205, 205, 205, 188, 32}
};

char *pig[] = {
        "                                  __   __                            ",
        "                                 __ \\ / __                           ",
        "                                /  \\ | /  \\                          ",
        "                                    \\|/                              ",
        "                               _,.---v---._                          ",
        "                      /\\__/\\  /            \\                         ",
        "                      \\_  _/ /              \\                        ",
        "                        \\ \\_|           @ __|                        ",
        "                         \\                \\_                         ",
        "                          \\     ,__/       /                         ",
        "                        ~~~`~~~~~~~~~~~~~~/~~~~                      "

};

// #define display_line (((maxLine - logo_height) >> 1) - 1)
#define display_line 0
void vga_logoDisplay()
{
    //    for (int i = 0; i < maxCol; ++i)
    //        for (int j = 0; j < display_line; ++j)
    //            ((char *)vga_start)[addr(i, j)] = 0;
    for (int i = 0; i < maxCol; ++i)
        ((unsigned char *)vga_start)[addr(i, 0)] = logo[0][i];
    for (int i = 0; i < maxCol; ++i)
        ((unsigned char *)vga_start)[addr(i, 1)] = logo[1][i];
    for (int i = 0; i < maxCol; ++i)
        ((unsigned char *)vga_start)[addr(i, 2)] = logo[2][i];
    for (int i = 0; i < maxCol; ++i)
        ((unsigned char *)vga_start)[addr(i, 3)] = logo[3][i];
    for (int i = 0; i < maxCol; ++i)
        ((unsigned char *)vga_start)[addr(i, 4)] = logo[4][i];
    for (int i = 0; i < maxCol; ++i)
        ((unsigned char *)vga_start)[addr(i, 5)] = logo[5][i];
    //    for (int i = 0; i < maxCol; ++i)
    //        for (int j = display_line + logo_height; j < maxLine; ++j)
    //            ((char *)vga_start)[addr(i, j)] = 0;
    for (int i = 0; i < maxCol; ++i) {
        for (int j = 12; j <= 22; ++j)
            ((unsigned char *) vga_start)[addr(i, j)] = pig[j - 12][i];
        wait(50);
    }
}

void vga_clear()
{
    *(unsigned int *)timer_start = 0;
    cur_line = 0, cur_col = 0;
    *(char *)start_line = 0;
    for (int i = 0; i < maxCol; ++i) // 硬件问题，采用列优先
        for (int j = 0; j < maxLine; ++j)
            ((char *)vga_start)[addr(i, j)] = 0;
}